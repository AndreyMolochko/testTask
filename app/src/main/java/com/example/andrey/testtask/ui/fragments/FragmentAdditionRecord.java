package com.example.andrey.testtask.ui.fragments;import android.opengl.Visibility;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.util.Log;import android.view.ContextMenu;import android.view.LayoutInflater;import android.view.Menu;import android.view.MenuInflater;import android.view.MenuItem;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.EditText;import android.widget.Toast;import com.example.andrey.testtask.R;import com.example.andrey.testtask.model.Record;import com.example.andrey.testtask.ui.activities.MainActivity;import com.google.firebase.auth.FirebaseAuth;import com.google.firebase.auth.FirebaseUser;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import java.util.Calendar;public class FragmentAdditionRecord extends Fragment {    private EditText mContextEditText;    private Button mAdditionButton;    private Record mRecord;    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        View view = inflater.inflate(R.layout.fragment_addition_record, container, false);        initViews(view);        initListenrs();        MainActivity.sAddMenuItem.setVisible(false);        return view;    }    private void initListenrs() {        mAdditionButton.setOnClickListener(v -> {            if (!mContextEditText.getText().toString().equals("")) {                if (FirebaseAuth.getInstance().getCurrentUser() != null) {                    initRecord();                    wtiteRecordFirebase();                    mContextEditText.setText("");                } else {                    Toast.makeText(getContext(), getString(R.string.need_login), Toast.LENGTH_SHORT).show();                }            } else {                Toast.makeText(getContext(), getString(R.string.enter_something), Toast.LENGTH_SHORT).show();            }        });    }    private void initViews(View pView) {        mContextEditText = pView.findViewById(R.id.context_edit_text_fragment_addition_record);        mAdditionButton = pView.findViewById(R.id.add_record_button_fragment_addition_record);    }    private void initRecord() {        mRecord = new Record();        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();        mRecord.setContext(mContextEditText.getText().toString());        mRecord.setDate(Calendar.getInstance().getTimeInMillis() * -1);//multiply -1 it's marker for getting date from firebase        mRecord.setUserId(currentUser.getUid());    }    private void wtiteRecordFirebase() {        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference("records");        databaseReference.push().setValue(mRecord);    }}